/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is not neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (function() { // webpackBootstrap
/*!***********************!*\
  !*** ./js/product.js ***!
  \***********************/
eval("function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\n//Page produit\n//On initialise nos variables\nvar camera;\nvar $cameraProduct = document.querySelector('#camera-product');\nvar lenses = document.createElement(\"select\"); //Appel URL\n\nvar params = new URL(document.location).searchParams;\nvar id = params.get('id'); //Obtiens l'id du produit\n//Appel de notre API\n\nfetch(\"http://localhost:3000/api/cameras/\" + id) //Rappel notre api + l'id de notre produit\n.then( /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(result_) {\n    var result;\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return result_.json();\n\n          case 2:\n            result = _context.sent;\n            //Donne un nom au tableau json récupéré\n            camera = result; //Result deviens camera\n            //Appel de nos functions\n\n            lenseList();\n            cameraCard();\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}())[\"catch\"](function (error) {\n  console.log(error);\n}); //Fonction pour le tableau lenses\n\nvar lenseList = function lenseList() {\n  for (var i = 0; i < camera.lenses.length; i++) {\n    var option = document.createElement(\"option\"); //Créé notre liste option\n\n    option.setAttribute(\"value\", camera.lenses[i]); //Incrémente nos lenses à notre liste option               \n\n    option.innerHTML = camera.lenses[i];\n    lenses.appendChild(option);\n  }\n}; //Notre template camera card\n\n\nvar cameraCard = function cameraCard() {\n  $cameraProduct.innerHTML += \"<div id=\\\"camera-item\\\" class=\\\"card col-10 mx-auto mt-5 mb-5 shadow\\\">\\n        <div class=\\\"background-image-product card-img-top mx-auto\\\" style=\\\"background-image: url(\".concat(camera.imageUrl, \")\\\"></div>\\n        <div class=\\\"card-body\\\">\\n            <h5 class=\\\"card-title\\\">\").concat(camera.name, \"</h5>\\n            <p class=\\\"card-text\\\">\").concat(camera.description, \"</p> \\n            <div id=\\\"camera-lense\\\"class=\\\"input-group col-12\\\">\\n                <div class=\\\"input-group-prepend col-sm-4 col-12 d-none d-sm-block\\\">\\n                    <label class=\\\"input-group-text\\\" for=\\\"inputGroupSelect01\\\">Lentilles</label>\\n                </div>\\n                <select class=\\\"custom-select col-sm-4 col-12\\\" id=\\\"inputGroupSelect01\\\">\\n                    \").concat(lenses.innerHTML, \"\\n                </select>\\n                <label class=\\\"camera-quantity-selector col-sm-4 col-12 text-center \\\" for=\\\"camera-quantity\\\">Quantit\\xE9: \\n                    <select id=\\\"quantity\\\" onclick=\\\"addToPrice()\\\" class=\\\"text-center mx-auto\\\" name=\\\"camera-quantity\\\">\\n                        <option value=\\\"1\\\">1</option>\\n                        <option value=\\\"2\\\">2</option>\\n                        <option value=\\\"3\\\">3</option>\\n                        <option value=\\\"4\\\">4</option>\\n                        <option value=\\\"5\\\">5</option>\\n                        <option value=\\\"6\\\">6</option>\\n                        <option value=\\\"7\\\">7</option>\\n                        <option value=\\\"8\\\">8</option>\\n                        <option value=\\\"9\\\">9</option>\\n                    </select>\\n                </label>\\n                <p id=\\\"camera-price\\\" class=\\\"card-text col-sm-4 col-12 mx-auto mt-3\\\"></p>\\n            </div>\\n            <div class=\\\"col-12 mt-3\\\">\\n                <button type=\\\"button\\\"  onclick=\\\"addToBasket()\\\" id=\\\"camera-buy\\\" class=\\\"add-to-products btn col-sm-6 col-12 mx-auto\\\">Ajouter au panier</button>\\n            </div>               \\n        </div>   \\n    </div>\");\n  addToPrice();\n}; //Fonction pour changer le prix en fonction de la quantité\n\n\nvar addToPrice = function addToPrice() {\n  var $cameraPrice = document.querySelector('#camera-price');\n  var quantity = document.querySelector('#quantity').value;\n  $cameraPrice.innerHTML = \"\".concat(camera.price * quantity, \" \\u20AC\");\n}; //Fonction pour supprimer le blur\n\n\nvar blurRemove = function blurRemove() {\n  var $blurRemove = document.querySelector('.basket');\n  $blurRemove.classList.remove(\"inactive\");\n  $blurRemove.classList.add(\"active\");\n}; //Fonction pour le localStorage\n\n\nvar addToBasket = function addToBasket() {\n  var quantity = document.querySelector('#quantity').value; //Récupère la valeur de la quantité\n\n  var storage = window.localStorage.getItem(\"orinocoCamera\"); //Créer notre stockage de panier\n\n  if (!storage) {\n    storage = {\n      products: []\n    };\n  } else {\n    storage = JSON.parse(storage); //On extrait notre json \n  }\n\n  storage.products.push({\n    name: camera.name,\n    _id: camera._id,\n    lenses: inputGroupSelect01.value,\n    quantity: quantity,\n    price: camera.price * quantity,\n    priceByItems: camera.price,\n    imageUrl: camera.imageUrl\n  });\n  window.localStorage.setItem(\"orinocoCamera\", JSON.stringify(storage));\n  blurRemove();\n  alert(\"\".concat(quantity, \" appareil \").concat(camera.name, \" lentille  \").concat(inputGroupSelect01.value, \" ajout\\xE9 \\xE0 votre panier !\"));\n};\n\n//# sourceURL=webpack://ottintimothe_5_27112020/./js/product.js?");
/******/ })()
;